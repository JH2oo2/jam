
<div class="container">
    <h4 style="font-family:monospace">Select your top 5 genres to get the magic matchmaking started...</h4>

    <%= simple_form_for(@top_genre) do |f| %>
      <%= f.input :genre, collection: TopGenre.all.pluck(:genre).uniq, input_html: {multiple: true, data: {controller: "tom-select", tom_select_options_value: { maxItems: 5 } }} %>
      <%= f.submit "Create profile", class: "btn btn-primary" %>
    <% end %>

    <section class="spotify-auth mt-5" data-controller="spotify-auth">
      <div
        class="spotify-env"
        data-client-id="<%= ENV["client_id"] %>"
        data-client-secret="<%= ENV["client_secret"] %>"
        <%# data-spotify-auth-client-id-value="testing" %>
      ></div>

      <div class="spotify-auth d-none" data-spotify-auth-target="auth">
        <h5>Connect My Account to Spotify</h5>
        <div
          class="btn btn-success my-2"
          data-action="click->spotify-auth#linkToSpotify"
          <%# click->spotify-auth#submitForm MAYBE ADD TO THE ABOVE LISTENERS REMEMBER TO UNCOMMENT IN THE SPOTIFY-AUTH AS WELL %>
        >Connect to Spotify</div>
      </div>

      <div class="top-genres mt-5 d-none" data-spotify-auth-target="genres">
        <%# <h5>My Top 5 Genres</h5> %>
        <div
          class="btn btn-success my-2"
          data-action="click->spotify-auth#getTopGenres"
        >Get Your Top 5 Genres from Spotify</div>
        <div class="top-genres-list mt-2">
          <% current_user.top_genres.each do |genre| %>
            <p><%= genre.genre %></p>
          <% end %>
        </div>
      </div>
    </section>
</div>
